<!DOCTYPE html>
<html>
    <head>
        <title>Delivery APP</title>
        {% load static %}
        <link rel="stylesheet" href="{% static 'style.css' %}">
        {% load static %}
        <script src="{% static 'script.js' %}"></script>
    </head>
    <body>
        <div id="TopBar">
            <div id="Sign">
                <h2>Delivery App</h2>
               
            </div>
            <h3>Hello {{Role}} {{Username}}</h3>
            <table id="options">
                <tr>
                    <td>Account info</td>
                    <td>Chat</td>
                    <td id="msgToggle">Inbox</td>
                    <!--
                    <span id="msgCount" style="color: red; font-weight: bold;">
                        ({{ msg|length }})
                    </span>-->
                    <div id="InboxDropdown" class="dropdown" style="display: none; position: absolute; top: 100%; right: 0; background: white; border: 1px solid #ccc; width: 250px; z-index: 1000;">
                        <ul style="list-style: none; padding: 10px; margin: 0;" id="msgArea">
                            {% for m in msg|slice:":5" %}
                                <li style="padding: 5px 0; border-bottom: 1px solid #eee;">
                                    {{ m.message }}
                                    <br><small>{{ m.timestamp }}</small>
                                </li>
                            {% empty %}
                                <li>No new messages.</li>
                            {% endfor %}
                        </ul>
                        <div style="text-align: center; padding: 5px;">
                            <button id="viewAll" data-user="{{userid}}">View All</button>
                        </div>
                    </div>

                    <td id="order" data-id="{{userid}}">History</td>
                    {% if Role == 'customer'%}
                    <td id="Favorite" data-id="{{userid}}">Favorite</td>
                    
                    <td data-id="{{userid}}">My Cart</td>
                    {% endif %}
                    
                    {% if Role == 'delivery'%}
                    
                    <td id="CurrentOrder" data-user="{{userid}}">Current order</td>
                    {% endif %}
                    
                </tr>
            </table>
        </div>
        {%if Role == 'customer' %}
        <div id="MenuBar">
            <div id="ResTop">Restaurants</div>
            <div id="Menus" data-user = '{{userid}}''>
             
                {% for i in Test %}
                <div class="restaurant_tab" data-id="{{ i.id }}">
                    {% load static %}
                    <img src= "{{i.img}}"  class="display"/>
                    <p>{{i.name}}</p>
                </div>
                {% endfor %}
            </div>
        </div>
            
        </div>
        {%endif%}
        {% if Role == 'vendor'%}
        <div id="MenuBar">
            <div id="ResTop">Orders Incoming</div>
            <hr style="border-top: dotted 1px;" class="line" />
            <div id="Orders" data-id = '{{userid}}'>
             {% if not Orders%}
             <h1>NO ORDERS YET</h1>
             {% else %}
             {% for i in Orders %}
             <div class="OrdersTab" data-id="{{i.id}}" data-user = "{{userid}}">
                <p>{{i.id}}</p>
                <p>{{i.items}}</p>
                <p>{{i.price}}</p>
                <p>{{i.created}}</p>
                <p>{{i.customer}}</p>
                <p>{{i.delivery}}</p>
             </div>
             {%endfor%}
             {%endif%}
            </div>
        </div>
        </div>
        {% endif %}
        {% if Role == 'delivery'%}
        <div id="MenuBar">
            <div id="ResTop">Orders Avaliable</div>
            <div id="deliverys">
            <hr style="border-top: dotted 1px;" class="line" />
             {% if not Orders%}
             <h1>NO ORDERS YET</h1>
             {% else %}
             {% for i in Orders %}
             <div class="OrdersTab" data-id="{{i.id}}" data-user = "{{userid}}">
                <p>{{i.id}}</p>
                <p>{{i.created}}</p>
                <p>{{i.customer}}</p>
                <p>{{i.restaurant}}</p>
              
             </div>
             {%endfor%}
             {%endif%}
             <hr style="border-top: dotted 1px;" class="line" />
            </div>
        </div>
        </div>
        {% endif %}
    </body>
</html>